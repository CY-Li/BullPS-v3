# ğŸ” Zeabur éƒ¨ç½²å•é¡Œè¨ºæ–·æŒ‡å—

## ğŸ› å•é¡Œæè¿°

æœ¬åœ°ç«¯ `/api/analysis` æ­£å¸¸è¿”å›æ•¸æ“šï¼Œä½† Zeabur éƒ¨ç½²å¾Œè¿”å›ç©ºå€¼ï¼š
- æœ¬åœ°: `http://localhost:8080/api/analysis` âœ… æ­£å¸¸
- Zeabur: `https://bullps-v3.zeabur.app/api/analysis` âŒ ç©ºå€¼

## ğŸ” è¨ºæ–·æ­¥é©Ÿ

### 1. **æª¢æŸ¥å¥åº·ç‹€æ…‹**
è¨ªå•: `https://bullps-v3.zeabur.app/api/health`

é æœŸè¿”å›ä¿¡æ¯ï¼š
```json
{
  "status": "healthy",
  "timestamp": "2025-07-15T...",
  "environment": "container",
  "analysis_path": "/app/data/analysis_result.json",
  "analysis_file_exists": false,
  "data_dir_exists": true,
  "static_dir_exists": true,
  "static_dir_path": "/app/frontend/dist",
  "files_in_static": [...]
}
```

**é—œéµæª¢æŸ¥é»**:
- `environment`: æ‡‰è©²æ˜¯ "container"
- `analysis_file_exists`: å¦‚æœæ˜¯ `false`ï¼Œèªªæ˜åˆ†ææ–‡ä»¶ä¸å­˜åœ¨
- `data_dir_exists`: æ‡‰è©²æ˜¯ `true`

### 2. **è§¸ç™¼åˆ†æ**
å¦‚æœ `analysis_file_exists` ç‚º `false`ï¼Œéœ€è¦è§¸ç™¼åˆ†æï¼š

**æ–¹æ³• 1**: POST è«‹æ±‚
```bash
curl -X POST https://bullps-v3.zeabur.app/api/run-now
```

**æ–¹æ³• 2**: GET è«‹æ±‚ï¼ˆæ¸¬è©¦ç”¨ï¼‰
```bash
curl https://bullps-v3.zeabur.app/api/trigger-analysis
```

**æ–¹æ³• 3**: å‰ç«¯ç•Œé¢
- è¨ªå• `https://bullps-v3.zeabur.app`
- é»æ“Šã€Œç«‹å³æ›´æ–°ã€æŒ‰éˆ•

### 3. **ç›£æ§åˆ†æç‹€æ…‹**
```bash
curl https://bullps-v3.zeabur.app/api/analysis-status
```

é æœŸè¿”å›ï¼š
```json
{
  "is_running": true,
  "current_stage": "æ­£åœ¨åˆ†æè‚¡ç¥¨...",
  "progress": 50,
  "message": "åˆ†æé€²è¡Œä¸­"
}
```

### 4. **æª¢æŸ¥åˆ†æçµæœ**
åˆ†æå®Œæˆå¾Œå†æ¬¡æª¢æŸ¥ï¼š
```bash
curl https://bullps-v3.zeabur.app/api/analysis
```

## ğŸ”§ å¯èƒ½çš„å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1: åˆ†ææ–‡ä»¶ä¸å­˜åœ¨
**ç—‡ç‹€**: `analysis_file_exists: false`

**åŸå› **: 
- å®¹å™¨å•Ÿå‹•å¾Œæ²’æœ‰é‹è¡Œéåˆ†æ
- æ–‡ä»¶è·¯å¾‘é…ç½®å•é¡Œ
- æ¬Šé™å•é¡Œ

**è§£æ±ºæ–¹æ¡ˆ**:
1. æ‰‹å‹•è§¸ç™¼åˆ†æï¼ˆè¦‹ä¸Šè¿°æ­¥é©Ÿ2ï¼‰
2. æª¢æŸ¥å®¹å™¨æ—¥èªŒæ˜¯å¦æœ‰éŒ¯èª¤
3. ç¢ºèªæ•¸æ“šç›®éŒ„æ¬Šé™æ­£ç¢º

### å•é¡Œ 2: åˆ†æé‹è¡Œå¤±æ•—
**ç—‡ç‹€**: è§¸ç™¼åˆ†æå¾Œä»ç„¶æ²’æœ‰çµæœ

**å¯èƒ½åŸå› **:
- API é™åˆ¶æˆ–ç¶²çµ¡å•é¡Œ
- ä¾è³´åŒ…ç¼ºå¤±
- å…§å­˜ä¸è¶³
- è¶…æ™‚å•é¡Œ

**è§£æ±ºæ–¹æ¡ˆ**:
1. æª¢æŸ¥ Zeabur æ—¥èªŒ
2. ç¢ºèªæ‰€æœ‰ä¾è³´å·²æ­£ç¢ºå®‰è£
3. æª¢æŸ¥å…§å­˜ä½¿ç”¨æƒ…æ³
4. èª¿æ•´è¶…æ™‚è¨­ç½®

### å•é¡Œ 3: è·¯å¾‘é…ç½®å•é¡Œ
**ç—‡ç‹€**: `environment` ä¸æ˜¯ "container" æˆ–è·¯å¾‘éŒ¯èª¤

**è§£æ±ºæ–¹æ¡ˆ**:
1. ç¢ºèª Dockerfile æ­£ç¢ºå‰µå»ºäº† `/app/data` ç›®éŒ„
2. æª¢æŸ¥ç’°å¢ƒè®Šé‡è¨­ç½®
3. é‡æ–°æ§‹å»ºå’Œéƒ¨ç½²

### å•é¡Œ 4: æ¬Šé™å•é¡Œ
**ç—‡ç‹€**: åˆ†æé‹è¡Œä½†ç„¡æ³•å¯«å…¥æ–‡ä»¶

**è§£æ±ºæ–¹æ¡ˆ**:
1. æª¢æŸ¥ `/app/data` ç›®éŒ„æ¬Šé™
2. ç¢ºèª appuser æœ‰å¯«å…¥æ¬Šé™
3. æª¢æŸ¥ docker-entrypoint.sh æ˜¯å¦æ­£ç¢ºåŸ·è¡Œ

## ğŸš€ ä¿®å¾©æ­¥é©Ÿ

### ç«‹å³ä¿®å¾©
1. **æ¨é€æ›´æ–°çš„ä»£ç¢¼**:
   ```bash
   git add .
   git commit -m "æ”¹é€² Zeabur éƒ¨ç½²è¨ºæ–·å’ŒéŒ¯èª¤è™•ç†"
   git push origin main
   ```

2. **ç­‰å¾… Zeabur é‡æ–°éƒ¨ç½²**

3. **é©—è­‰ä¿®å¾©**:
   - æª¢æŸ¥ `/api/health` ç«¯é»
   - è§¸ç™¼åˆ†æ
   - ç¢ºèªçµæœè¿”å›

### æ·±åº¦è¨ºæ–·
å¦‚æœå•é¡ŒæŒçºŒå­˜åœ¨ï¼š

1. **æª¢æŸ¥ Zeabur æ—¥èªŒ**:
   - åœ¨ Zeabur æ§åˆ¶å°æŸ¥çœ‹æ‡‰ç”¨æ—¥èªŒ
   - å°‹æ‰¾éŒ¯èª¤ä¿¡æ¯å’Œè­¦å‘Š

2. **æª¢æŸ¥ç’°å¢ƒå·®ç•°**:
   - æ¯”è¼ƒæœ¬åœ°å’Œå®¹å™¨ç’°å¢ƒ
   - ç¢ºèªæ‰€æœ‰æ–‡ä»¶è·¯å¾‘æ­£ç¢º

3. **æ¸¬è©¦å®¹å™¨æœ¬åœ°é‹è¡Œ**:
   ```bash
   docker build -t bullps-v3-test .
   docker run -p 8080:8080 bullps-v3-test
   ```

## ğŸ“ é é˜²æªæ–½

### 1. **è‡ªå‹•åˆå§‹åŒ–**
ç¢ºä¿å®¹å™¨å•Ÿå‹•æ™‚è‡ªå‹•é‹è¡Œä¸€æ¬¡åˆ†æï¼š
- ä¿®æ”¹ docker-entrypoint.sh
- æ·»åŠ å•Ÿå‹•å¾Œçš„åˆå§‹åŒ–é‚è¼¯

### 2. **å¥åº·æª¢æŸ¥**
å®šæœŸæª¢æŸ¥æ‡‰ç”¨ç‹€æ…‹ï¼š
- è¨­ç½®ç›£æ§å‘Šè­¦
- å®šæœŸæª¢æŸ¥é—œéµç«¯é»

### 3. **æ—¥èªŒç›£æ§**
æ”¹é€²æ—¥èªŒè¨˜éŒ„ï¼š
- æ·»åŠ æ›´è©³ç´°çš„èª¿è©¦ä¿¡æ¯
- è¨˜éŒ„é—œéµæ“ä½œçš„åŸ·è¡Œç‹€æ…‹

## ğŸ¯ é æœŸçµæœ

ä¿®å¾©å¾Œï¼ŒZeabur éƒ¨ç½²æ‡‰è©²ï¼š
- âœ… `/api/health` é¡¯ç¤ºæ­£ç¢ºçš„ç’°å¢ƒä¿¡æ¯
- âœ… `/api/analysis` è¿”å›å®Œæ•´çš„åˆ†ææ•¸æ“š
- âœ… å‰ç«¯æ­£å¸¸é¡¯ç¤ºåˆ†æçµæœæ‘˜è¦
- âœ… æ‰€æœ‰åŠŸèƒ½èˆ‡æœ¬åœ°ç’°å¢ƒä¸€è‡´

---

**è¨ºæ–·æŒ‡å—å‰µå»ºæ™‚é–“**: 2025-07-15  
**ç‹€æ…‹**: ğŸ”„ å¾…é©—è­‰  
**ä¸‹ä¸€æ­¥**: æ¨é€ä»£ç¢¼ä¸¦é‡æ–°éƒ¨ç½²åˆ° Zeabur
